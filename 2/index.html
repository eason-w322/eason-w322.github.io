<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CS180 Project 1 — Colorizing the Prokudin-Gorskii Photos</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header class="site-header">
  <h1>Colorizing the Prokudin-Gorskii Photos</h1>
  <p class="subtitle">CS180/280A • Project 1</p>
</header>

<main class="container">
  <nav class="toc">
    <a href="#overview">Overview</a>
    <a href="#approach">Approach</a>
    <a href="#pyramid">Pyramid</a>
    <a href="#results">Results</a>
  </nav>

  <section class="content">
    <section id="overview" class="card">
      <h2>Overview</h2>
      <p>
        In this project, I reconstruct color images from Prokudin-Gorskii glass plates (top=Blue, middle=Green, bottom=Red) by aligning the G and R channels to B using a windowed search with normalized cross-correlation (NCC) and a coarse-to-fine image-pyramid approach for large .tif files.
      </p>
    </section>

    <section id="approach" class="card">
      <h2>Single-Scale Alignment</h2>
      <p>
        The glass plate is first divided into three equal parts corresponding to the blue, green, and red channels. 
    To minimize boundary artifacts, I crop the central region with a crop fraction of 0.15. 
    Within a search window of [-15, +15], I implement normalized cross-correlation (NCC) to determine the optimal displacement (dy, dx) 
    that maximizes the similarity score. I applied this method to three sample images (shown below). 
    The results demonstrate strong alignment overall, though the outer edges exhibit some color fringing due to border inconsistencies. 
    To address this, I implemented an additional <code>crop_border</code> function, which successfully removes most of the noisy edge artifacts.
      </p>
    <div class="grid interactive-gallery">
    <figure class="tile clickable">
      <img src="https://raw.githubusercontent.com/eason-w322/CS180-Project-1/main/results/cathedral_rgb.jpg">
      <figcaption>
        <strong>Cathedral</strong>
        <div class="meta">Offsets: (dy, dx)=… | Processing Time: …s</div>
      </figcaption>
    </figure>

    <figure class="tile clickable">
      <img src="results/sample2.jpg" alt="Sample 2">
      <figcaption>
        <strong>Monastery</strong>
        <div class="meta">Offsets: (dy, dx)=… | Processing Time: …s</div>
      </figcaption>
    </figure>

    <figure class="tile clickable">
      <img src="https://raw.githubusercontent.com/eason-w322/CS180-Project-1/main/results/tobolsk_rgb.jpg>
      <figcaption>
        <strong>Tobolsk</strong>
        <div class="meta">Offsets: (dy, dx)=… | Processing Time: …s</div>
      </figcaption>
    </figure>
  </div>
</section>

    <section id="pyramid" class="card">
      <h2>Image Pyramid (Coarse → Fine)</h2>
      <ol>
        <li>Downsample by factor 2 until min(H,W) is small.</li>
        <li>Search at coarsest level; upscale displacement; refine in a ±r window at each finer level.</li>
        <li>Optionally use gradient magnitude for robust matching (exposure differences).</li>
      </ol>
    </section>

    <section id="results" class="card">
      <h2>Results</h2>

      <!-- Compare slider (optional). Replace images with your own in docs/results/ -->
      <div class="compare">
        <img class="img after" src="results/emir_rgb.jpg" alt="After (aligned RGB)">
        <img class="img before" src="results/emir_rgb.jpg" alt="Before (placeholder)">
        <input class="slider" type="range" min="0" max="100" value="50" aria-label="Compare slider">
      </div>
      <p class="caption">Drag to compare (use your own before/after if you have one).</p>

      <!-- Grid of outputs -->
      <div class="grid">
        <figure class="tile">
          <img src="results/cathedral_rgb.jpg" alt="Cathedral">
          <figcaption>
            <strong>Cathedral</strong>
            <div class="meta">Offsets G(dy,dx)=…, R(dy,dx)=…</div>
          </figcaption>
        </figure>

        <figure class="tile">
          <img src="results/tobolsk_rgb.jpg" alt="Tobolsk">
          <figcaption>
            <strong>Tobolsk</strong>
            <div class="meta">Offsets G(dy,dx)=…, R(dy,dx)=…</div>
          </figcaption>
        </figure>

        <figure class="tile">
          <img src="results/emir_rgb.jpg" alt="Emir">
          <figcaption>
            <strong>Emir</strong>
            <div class="meta">Offsets G(dy,dx)=…, R(dy,dx)=…</div>
          </figcaption>
        </figure>
      </div>
    </section>
  </section>
</main>

<footer class="site-footer">
  <p>© 2025 Your Name • CS180/280A</p>
</footer>

<script src="compare.js"></script>
</body>
</html>
